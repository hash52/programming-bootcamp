# 問題ファイル作成: 開発者向けドキュメント

本教材では、各章末の「練習問題」を **独立した `.mdx` ファイル** として管理している。  
これにより、問題の **ランダム出題** や **ダッシュボード上での動的表示** に対応できるようにしている。  
そのため、通常の Markdown 記述よりも少し手間はかかるが、構造化された設計になっている。

---

## ディレクトリ構成のルール

- `src/questions` と `docs/` のディレクトリ構造は **完全に一致** させること。  
  例：

```
docs/
├── java/
│   └── basics/
│       └── if.mdx
src/
└── questions/
    ├── java/
    │   └── basics/
    │       └── if/
    │           ├── q1.mdx
    │           └── q2.mdx

```

- `docs/java/basics/if.mdx` に対応する問題は  
  `src/questions/java/basics/if/` ディレクトリに配置する。

---

## 問題ファイルの命名規則

- 問題は **1 問につき 1 ファイル** とする。
- ファイル名は **連番 (`q1.mdx`, `q2.mdx`, `q3.mdx`, ...)** で命名する。
- 拡張子は必ず `.mdx` とする。

例：

```
src/questions/java/basics/if/q1.mdx
src/questions/java/basics/if/q2.mdx
```

---

## 問題の呼び出し方法

作成した問題は、本文内から次のように呼び出す：

```tsx
<QuestionRenderer id="java/basics/if#q1" />
```

> **ポイント**
>
> - `id` には `.mdx` を除いたディレクトリパスとファイル名を指定する。
> - `docs/` 以下の構造をそのまま `src/questions/` に対応させているため、  
>   どの教材ページからも同一形式でアクセスできる。
> - たとえば `src/questions/java/basics/if/q1.mdx` であれば  
>   `id="java/basics/if#q1"` となる。

---

## このような構造を採用している理由

通常の教材であれば、問題文を教材本文 (`.mdx`) に直接埋め込んでも問題ない。  
しかし、本教材では以下の目的のため、あえて **問題ファイルを分離** している：

1. **ダッシュボード機能との連携**

   - 学習者が各問題を「理解済み」「未理解」としてチェックできる。
   - 達成率や経過日数を localStorage に記録して、ダッシュボードで集計できる。

2. **ランダム出題機能の実現**

   - 同一トピック内から未達成問題のみをランダムに出題する。
   - 問題を増減しても ID 体系が変わらず、既存データを壊さない。

3. **再利用性・保守性の向上**
   - 同じ問題を複数教材で再利用できる。
   - 問題をファイル単位でレビュー・修正しやすい。

---

## 開発者への補足メモ

| 項目                   | 内容                                                                  |
| ---------------------- | --------------------------------------------------------------------- |
| **ファイル配置**       | `src/questions/{docsパス}/{問題フォルダ}/qN.mdx`                      |
| **ファイル内容**       | 通常の MDX 構文（見出し、リスト、コードブロック、解説など）           |
| **呼び出しタグ**       | `<QuestionRenderer id="カテゴリ/トピック#q番号" />`                   |
| **内部処理**           | `QuestionRenderer` が `require.context` により対象 MDX を自動読み込み |
| **URL からの直リンク** | `#q1` などのアンカーで該当問題位置に自動スクロール                    |

---

## 実装例（教材側）

教材ページ `docs/java/basics/if.mdx` の一部：

```mdx
## 練習問題

この章の内容を理解したか確認してみましょう。

`\`\`tsx
\<QuestionRenderer id="java/basics/if#q1" />
\<QuestionRenderer id="java/basics/if#q2" />
`\`\`
```

---

## 将来的な拡張を見据えた設計

- 今後、`QuestionRenderer` は問題の正答率・最終確認日などのメタデータを
  localStorage から取得し、進捗と連動して表示できるようにする。
- 問題データを JSON や YAML ではなく `.mdx` で管理しているのは、
  **文章構造（説明・コード例・ヒントなど）をそのままマークアップできるため**。

---

## まとめ

| 要点                 | 内容                                             |
| -------------------- | ------------------------------------------------ |
| 🔹 1 問 1 ファイル制 | `q1.mdx`, `q2.mdx`, ...                          |
| 🔹 ディレクトリ構造  | `src/questions` と `docs` は同一構造             |
| 🔹 呼び出し方法      | `<QuestionRenderer id="java/basics/if#q1" />`    |
| 🔹 理由              | ダッシュボード集計・ランダム出題・再利用性のため |
| 🔹 効果              | 問題追加・修正時も壊れない安定した教材管理       |

---

このルールに従えば、教材と問題が自動的にリンクされ、
新しい問題を追加しても **全ページ・ダッシュボード・出題機能が同期して動作**する。

```

```
